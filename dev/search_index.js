var documenterSearchIndex = {"docs":
[{"location":"detail/#Docstrings","page":"Docstrings","title":"Docstrings","text":"","category":"section"},{"location":"detail/#All-docstrings","page":"Docstrings","title":"All docstrings","text":"","category":"section"},{"location":"future/#Future-work","page":"Future work","title":"Future work","text":"","category":"section"},{"location":"future/","page":"Future work","title":"Future work","text":"Add support for NURBS\nThis may be in other Julia package.\nAdd example for IGA\n...","category":"page"},{"location":"poisson/#Example-1-Poisson's-equation","page":"Example 1 - Poisson's equation","title":"Example 1 - Poisson's equation","text":"","category":"section"},{"location":"poisson/#Abstract","page":"Example 1 - Poisson's equation","title":"Abstract","text":"","category":"section"},{"location":"poisson/","page":"Example 1 - Poisson's equation","title":"Example 1 - Poisson's equation","text":"In this section, we will solve a Poisson's equation","category":"page"},{"location":"poisson/","page":"Example 1 - Poisson's equation","title":"Example 1 - Poisson's equation","text":"bigtriangleup u = f","category":"page"},{"location":"poisson/","page":"Example 1 - Poisson's equation","title":"Example 1 - Poisson's equation","text":"on B-spline manifold M.","category":"page"},{"location":"poisson/#How-to-solve-it-numerically","page":"Example 1 - Poisson's equation","title":"How to solve it numerically","text":"","category":"section"},{"location":"poisson/","page":"Example 1 - Poisson's equation","title":"Example 1 - Poisson's equation","text":"TODO: write more","category":"page"},{"location":"contributing/#Contributing","page":"Contributing","title":"Contributing","text":"","category":"section"},{"location":"contributing/","page":"Contributing","title":"Contributing","text":"The main contributer Hyrodium is not native English speaker. So, English corrections would be really helpful. Of course, other code improvement are welcomed!","category":"page"},{"location":"contributing/","page":"Contributing","title":"Contributing","text":"Feel free to open issue, and pull request!","category":"page"},{"location":"contributing/","page":"Contributing","title":"Contributing","text":"Issues\nPull requests","category":"page"},{"location":"elasticity/#Example-2-Linear-elasticity","page":"Example 2 - Linear elasticity","title":"Example 2 - Linear elasticity","text":"","category":"section"},{"location":"elasticity/#Abstract","page":"Example 2 - Linear elasticity","title":"Abstract","text":"","category":"section"},{"location":"elasticity/","page":"Example 2 - Linear elasticity","title":"Example 2 - Linear elasticity","text":"In this section, we will solve a linear elastostatic problem","category":"page"},{"location":"elasticity/","page":"Example 2 - Linear elasticity","title":"Example 2 - Linear elasticity","text":"beginaligned\noperatornamediv(sigma) + f = 0\nsigma = Cvarepsilon\nendaligned","category":"page"},{"location":"elasticity/","page":"Example 2 - Linear elasticity","title":"Example 2 - Linear elasticity","text":"on B-spline manifold M.","category":"page"},{"location":"elasticity/#How-to-solve-it-numerically","page":"Example 2 - Linear elasticity","title":"How to solve it numerically","text":"","category":"section"},{"location":"elasticity/","page":"Example 2 - Linear elasticity","title":"Example 2 - Linear elasticity","text":"TODO: write more","category":"page"},{"location":"benchmark/#Benchmark","page":"Benchmark","title":"Benchmark","text":"","category":"section"},{"location":"benchmark/#Concrete-type-determination;-generality-vs-speed-performance","page":"Benchmark","title":"Concrete type determination; generality vs speed performance","text":"","category":"section"},{"location":"benchmark/#B-spline-space","page":"Benchmark","title":"B-spline space","text":"","category":"section"},{"location":"benchmark/","page":"Benchmark","title":"Benchmark","text":"There are two subtypes of AbstractBSplineSpace.","category":"page"},{"location":"benchmark/","page":"Benchmark","title":"Benchmark","text":"julia> subtypes(AbstractBSplineSpace)\n2-element Array{Any,1}:\n BSplineSpace\n FastBSplineSpace","category":"page"},{"location":"benchmark/","page":"Benchmark","title":"Benchmark","text":"BSplineSpace\nGeneral degree of polynomial is supported.\nFastBSplineSpace\n5 or less degree of polynomial is supported.\nBut much faster than BSplineSpace","category":"page"},{"location":"benchmark/#B-spline-manifold","page":"Benchmark","title":"B-spline manifold","text":"","category":"section"},{"location":"benchmark/","page":"Benchmark","title":"Benchmark","text":"There are five subtypes of AbstractBSplineManifold.","category":"page"},{"location":"benchmark/","page":"Benchmark","title":"Benchmark","text":"julia> subtypes(AbstractBSplineManifold)\n5-element Array{Any,1}:\n BSplineCurve\n BSplineManifold\n BSplineSolid\n BSplineSurface\n FastBSplineManifold","category":"page"},{"location":"benchmark/","page":"Benchmark","title":"Benchmark","text":"BSplineManifold\nGeneral degree of polynomial is supported.\nGeneral dimension of polynomial is supported.\nFastBSplineManifold\n5 or less degree of polynomial is supported.\nGeneral dimensional manifold is supported.\nMuch faster than BSplineManifold\nBSplineCurve\n5 or less degree of polynomial is supported.\nOnly one dimensional manifold (curve) is supported.\nMuch faster than FastBSplineManifold\nBSplineSurface\n5 or less degree of polynomial is supported.\nOnly two dimensional manifold (surface) is supported.\nMuch faster than FastBSplineManifold\nBSplineCurve\n5 or less degree of polynomial is supported.\nOnly three dimensional manifold (solid) is supported.\nMuch faster than FastBSplineManifold","category":"page"},{"location":"benchmark/#Detailed-Benchmarks","page":"Benchmark","title":"Detailed Benchmarks","text":"","category":"section"},{"location":"benchmark/#B-spline-basis-function","page":"Benchmark","title":"B-spline basis function","text":"","category":"section"},{"location":"benchmark/","page":"Benchmark","title":"Benchmark","text":"In this section, we compare the implementation of Cox-de Boor algorithm.","category":"page"},{"location":"benchmark/#Naive-implementation","page":"Benchmark","title":"Naive implementation","text":"","category":"section"},{"location":"benchmark/","page":"Benchmark","title":"Benchmark","text":"using BenchmarkTools\n\nfunction B(i,p,k,t)\n    if p==0\n        return float(k[i]â‰¤t<k[i+1])\n    else\n        return B(i,p-1,k,t)*(t-k[i])/(k[i+p]-k[i]) + B(i+1,p-1,k,t)*(k[i+p+1]-t)/(k[i+p+1]-k[i+1])\n    end\nend\n\nknotvector = sort(rand(10)) # Vector{Float64} with 10 elements\np = 3\ni = 1\nt = 0.2\n\n@benchmark B(i,p,knotvector,t)","category":"page"},{"location":"benchmark/","page":"Benchmark","title":"Benchmark","text":"Result: 118.757 ns","category":"page"},{"location":"benchmark/#Use-type-BSplineSpace","page":"Benchmark","title":"Use type BSplineSpace","text":"","category":"section"},{"location":"benchmark/","page":"Benchmark","title":"Benchmark","text":"using BenchmarkTools\nusing BasicBSpline\nknotvector = sort(rand(10)) # Vector{Float64} with 10 elements\np = 3\ni = 1\nt = 0.2\nk = Knots(knotvector)\nP = BSplineSpace(p,k)\n@benchmark bsplinebasis(i,P,t)","category":"page"},{"location":"benchmark/","page":"Benchmark","title":"Benchmark","text":"Result: 223.359 ns","category":"page"},{"location":"benchmark/","page":"Benchmark","title":"Benchmark","text":"Slower than naive implementation.","category":"page"},{"location":"benchmark/#Use-type-FastBSplineSpace","page":"Benchmark","title":"Use type FastBSplineSpace","text":"","category":"section"},{"location":"benchmark/","page":"Benchmark","title":"Benchmark","text":"using BenchmarkTools\nusing BasicBSpline\nknotvector = sort(rand(10)) # Vector{Float64} with 10 elements\np = 3\ni = 1\nt = 0.2\nk = Knots(knotvector)\nP = FastBSplineSpace(p,k)\n@benchmark bsplinebasis(i,P,t)","category":"page"},{"location":"benchmark/","page":"Benchmark","title":"Benchmark","text":"Result: 46.722 ns","category":"page"},{"location":"benchmark/","page":"Benchmark","title":"Benchmark","text":"The fastest.","category":"page"},{"location":"benchmark/#B-spline-manifold-2","page":"Benchmark","title":"B-spline manifold","text":"","category":"section"},{"location":"benchmark/#Use-type-BSplineManifold","page":"Benchmark","title":"Use type BSplineManifold","text":"","category":"section"},{"location":"benchmark/#Use-type-FastBSplineManifold","page":"Benchmark","title":"Use type FastBSplineManifold","text":"","category":"section"},{"location":"benchmark/#Use-type-BSplineSurface","page":"Benchmark","title":"Use type BSplineSurface","text":"","category":"section"},{"location":"#BasicBSpline.jl","page":"Home","title":"BasicBSpline.jl","text":"","category":"section"},{"location":"","page":"Home","title":"Home","text":"Basic operations for B-spline functions and related things with julia","category":"page"},{"location":"","page":"Home","title":"Home","text":"(Image: Stable) (Image: Dev) (Image: Build Status) (Image: Coverage) (Image: DOI)","category":"page"},{"location":"","page":"Home","title":"Home","text":"(Image: )","category":"page"},{"location":"#Summary","page":"Home","title":"Summary","text":"","category":"section"},{"location":"","page":"Home","title":"Home","text":"This package provides basic (mathematical) operations for B-spline.","category":"page"},{"location":"","page":"Home","title":"Home","text":"B-spline basis function\nSome operations for knot vector\nB-spline manifold (includes curve, surface and solid)\nRefinement for B-spline manifold\nFitting control points for B-spline manifold","category":"page"},{"location":"#Comparison-to-other-julia-packages-for-B-spline","page":"Home","title":"Comparison to other julia packages for B-spline","text":"","category":"section"},{"location":"","page":"Home","title":"Home","text":"Interpolations.jl\nCurrently this package's support is best for B-splines and also supports irregular grids.\nBut seems like no method for B-spline manifold.\nApproXD.jl\nIts functions are similar to Interpolations.jl.\nDierckx.jl\nWrapper for the dierckx Fortran library.\nOnly 1-d or 2-d B-spline manifold are supported.\n5 or less degree of polynomial are supported.\nBasicBSpline.jl (this package)\nAny degree of polynomial are supported.\nAny dimension are supported.\nFast implementation for lower degree (â‰¤ 5) and dimension (â‰¤ 3).\nRefinement algorithm for B-spline manifold.\nFitting algorithm by least squares.","category":"page"},{"location":"#Installation","page":"Home","title":"Installation","text":"","category":"section"},{"location":"","page":"Home","title":"Home","text":"Install this package","category":"page"},{"location":"","page":"Home","title":"Home","text":"pkg> add BasicBSpline","category":"page"},{"location":"","page":"Home","title":"Home","text":"To export graphics, use ExportNURBS.jl.","category":"page"},{"location":"","page":"Home","title":"Home","text":"pkg> add https://github.com/hyrodium/ExportNURBS.jl","category":"page"},{"location":"#Example","page":"Home","title":"Example","text":"","category":"section"},{"location":"#B-spline-function","page":"Home","title":"B-spline function","text":"","category":"section"},{"location":"","page":"Home","title":"Home","text":"using BasicBSpline\nusing Plots\ngr()\n\nk = Knots([0.00,1.50,2.50,5.50,8.00,9.00,9.50,10.0])\nP0 = BSplineSpace(0,k) # 0th degree piecewise polynomial space\nP1 = BSplineSpace(1,k) # 1st degree piecewise polynomial space\nP2 = BSplineSpace(2,k) # 2nd degree piecewise polynomial space\nP3 = BSplineSpace(3,k) # 3rd degree piecewise polynomial space\nplot(\n    plot([t->bsplinebasis(i,P0,t) for i in 1:dim(P0)], 0, 10, ylims=(0,1), legend=false),\n    plot([t->bsplinebasis(i,P1,t) for i in 1:dim(P1)], 0, 10, ylims=(0,1), legend=false),\n    plot([t->bsplinebasis(i,P2,t) for i in 1:dim(P2)], 0, 10, ylims=(0,1), legend=false),\n    plot([t->bsplinebasis(i,P3,t) for i in 1:dim(P3)], 0, 10, ylims=(0,1), legend=false),\n    layout=(2,2),\n)","category":"page"},{"location":"","page":"Home","title":"Home","text":"(Image: )","category":"page"},{"location":"","page":"Home","title":"Home","text":"Try interactive graph with Desmos graphing calculator!","category":"page"},{"location":"#B-spline-manifold","page":"Home","title":"B-spline manifold","text":"","category":"section"},{"location":"","page":"Home","title":"Home","text":"using BasicBSpline\nusing ExportNURBS\n\np = 2 # degree of polynomial\nk = Knots(1:8) # knot vector\nP = BSplineSpace(p,k) # B-spline space\nrand_a = [rand(2) for i in 1:dim(P), j in 1:dim(P)]\na = [[2*i-6.5,2*j-6.5] for i in 1:dim(P), j in 1:dim(P)] + rand_a # random generated control points\nM = BSplineManifold([P,P],a) # Define B-spline manifold\nsave_png(\"2dim.png\", M) # save image","category":"page"},{"location":"","page":"Home","title":"Home","text":"(Image: )","category":"page"},{"location":"#Refinement","page":"Home","title":"Refinement","text":"","category":"section"},{"location":"#h-refinemnet","page":"Home","title":"h-refinemnet","text":"","category":"section"},{"location":"","page":"Home","title":"Home","text":"kâ‚Š=[Knots(3.3,4.2),Knots(3.8,3.2,5.3)] # additional knots\nMâ€² = refinement(M,kâ‚Š=kâ‚Š) # refinement of B-spline manifold\nsave_png(\"2dim_h-refinement.png\", Mâ€²) # save image","category":"page"},{"location":"","page":"Home","title":"Home","text":"(Image: )","category":"page"},{"location":"","page":"Home","title":"Home","text":"Note that this shape and the last shape are identical.","category":"page"},{"location":"#p-refinemnet","page":"Home","title":"p-refinemnet","text":"","category":"section"},{"location":"","page":"Home","title":"Home","text":"pâ‚Š=[1,2] # additional degrees\nMâ€² = refinement(M,pâ‚Š=pâ‚Š) # refinement of B-spline manifold\nsave_png(\"2dim_p-refinement.png\", Mâ€²) # save image","category":"page"},{"location":"","page":"Home","title":"Home","text":"(Image: )","category":"page"},{"location":"","page":"Home","title":"Home","text":"Note that this shape and the last shape are identical.","category":"page"},{"location":"#Fitting-B-spline-manifold","page":"Home","title":"Fitting B-spline manifold","text":"","category":"section"},{"location":"","page":"Home","title":"Home","text":"Try on Desmos graphing graphing calculator!","category":"page"},{"location":"","page":"Home","title":"Home","text":"p1 = 2\np2 = 2\nk1 = Knots(-10:10)+p1*Knots(-10,10)\nk2 = Knots(-10:10)+p2*Knots(-10,10)\nP1 = FastBSplineSpace(p1, k1)\nP2 = FastBSplineSpace(p2, k2)\n\nf(u1, u2) = [2u1 + sin(u1) + cos(u2) + u2 / 2, 3u2 + sin(u2) + sin(u1) / 2 + u1^2 / 6] / 5\n\na = fittingcontrolpoints(f, P1, P2)\nM = BSplineManifold([P1,P2],a)\nsave_png(\"fitting.png\", M, unitlength=50, up=10, down=-10, left=-10, right=10)","category":"page"},{"location":"","page":"Home","title":"Home","text":"(Image: ) (Image: )","category":"page"},{"location":"","page":"Home","title":"Home","text":"If the knots span is too coarse, the approximation will be coarse.","category":"page"},{"location":"","page":"Home","title":"Home","text":"p1 = 2\np2 = 2\nk1 = Knots(-10:5:10)+p1*Knots(-10,10)\nk2 = Knots(-10:5:10)+p2*Knots(-10,10)\nP1 = FastBSplineSpace(p1, k1)\nP2 = FastBSplineSpace(p2, k2)\n\nf(u1, u2) = [2u1 + sin(u1) + cos(u2) + u2 / 2, 3u2 + sin(u2) + sin(u1) / 2 + u1^2 / 6] / 5\n\na = fittingcontrolpoints(f, P1, P2)\nM = BSplineManifold([P1,P2],a)\nsave_png(\"fitting_coarse.png\", M, unitlength=50, up=10, down=-10, left=-10, right=10)","category":"page"},{"location":"","page":"Home","title":"Home","text":"(Image: )","category":"page"},{"location":"#Draw-smooth-vector-graphics","page":"Home","title":"Draw smooth vector graphics","text":"","category":"section"},{"location":"","page":"Home","title":"Home","text":"p = 3\nk = Knots(range(-2Ï€,2Ï€,length=8))+p*Knots(-2Ï€,2Ï€)\nP = FastBSplineSpace(p, k)\n\nf(u) = [u,sin(u)]\n\na = fittingcontrolpoints(f, P)\nM = BSplineManifold([P],a)\nsave_svg(\"sine_curve.svg\", M, unitlength=50, up=2, down=-2, left=-8, right=8)","category":"page"},{"location":"","page":"Home","title":"Home","text":"(Image: )","category":"page"},{"location":"","page":"Home","title":"Home","text":"This is useful when you edit graphs (or curves) with your favorite vector graphics editor.","category":"page"},{"location":"#References","page":"Home","title":"References","text":"","category":"section"},{"location":"","page":"Home","title":"Home","text":"If you use BasicBSpline.jl in your work, please consider citing it by","category":"page"},{"location":"","page":"Home","title":"Home","text":"@misc{hyrodium:2020:BasicBSpline,\n  title={BasicBSpline.jl: Basic operations for B-spline functions and related things with julia},\n  author={Yuto Horikawa},\n  year={2020},\n  howpublished={\\url{https://hyrodium.github.io/BasicBSpline.jl/stable/}},\n  doi={10.5281/zenodo.4356869}\n}","category":"page"},{"location":"math/#Mathematical-properties-of-B-spline","page":"Mathematical properties of B-spline","title":"Mathematical properties of B-spline","text":"","category":"section"},{"location":"math/#Introduction","page":"Mathematical properties of B-spline","title":"Introduction","text":"","category":"section"},{"location":"math/","page":"Mathematical properties of B-spline","title":"Mathematical properties of B-spline","text":"B-spline is a mathematical object, and it has a lot of application(e.g. NURBS, IGA).","category":"page"},{"location":"math/","page":"Mathematical properties of B-spline","title":"Mathematical properties of B-spline","text":"In this page, we'll explain the mathematical definition and property of B-spline with Julia code.","category":"page"},{"location":"math/","page":"Mathematical properties of B-spline","title":"Mathematical properties of B-spline","text":"Before running the following code, do not forget importing the package:","category":"page"},{"location":"math/","page":"Mathematical properties of B-spline","title":"Mathematical properties of B-spline","text":"using BasicBSpline","category":"page"},{"location":"math/#Notice","page":"Mathematical properties of B-spline","title":"Notice","text":"","category":"section"},{"location":"math/","page":"Mathematical properties of B-spline","title":"Mathematical properties of B-spline","text":"A book \"Geometric Modeling with Splines\" by Elaine Cohen, Richard F. Riesenfeld, Gershon Elber is really recommended.\nSome of notations in this page are my original, but these are well-considered results.","category":"page"},{"location":"math/#Knot-vector","page":"Mathematical properties of B-spline","title":"Knot vector","text":"","category":"section"},{"location":"math/","page":"Mathematical properties of B-spline","title":"Mathematical properties of B-spline","text":"tip: Def.  Knot vector\nA finite sequencek = (k_1 dots k_l)is called knot vector if the sequence is broad monotonic increase, i.e. k_i le k_i+1.","category":"page"},{"location":"math/","page":"Mathematical properties of B-spline","title":"Mathematical properties of B-spline","text":"[fig]","category":"page"},{"location":"math/","page":"Mathematical properties of B-spline","title":"Mathematical properties of B-spline","text":"Knots(vector::AbstractVector{<:Real})","category":"page"},{"location":"math/#BasicBSpline.Knots-Tuple{AbstractArray{var\"#s25\",1} where var\"#s25\"<:Real}","page":"Mathematical properties of B-spline","title":"BasicBSpline.Knots","text":"Construct knot vector from given array.\n\nk=(k_1dotsk_l)\n\nExamples\n\njulia> k = Knots([1,2,3])\nKnots([1.0, 2.0, 3.0])\n\njulia> k = Knots(1:3)\nKnots([1.0, 2.0, 3.0])\n\n\n\n\n\n","category":"method"},{"location":"math/","page":"Mathematical properties of B-spline","title":"Mathematical properties of B-spline","text":"Knots(knot::Real)","category":"page"},{"location":"math/#BasicBSpline.Knots-Tuple{Real}","page":"Mathematical properties of B-spline","title":"BasicBSpline.Knots","text":"Construct knot vector from given real numbers.\n\nExamples\n\njulia> k = Knots(1,2,3)\nKnots([1.0, 2.0, 3.0])\n\njulia> k = Knots()\nKnots([])\n\n\n\n\n\n","category":"method"},{"location":"math/","page":"Mathematical properties of B-spline","title":"Mathematical properties of B-spline","text":"length(k::Knots)","category":"page"},{"location":"math/#Base.length-Tuple{Knots}","page":"Mathematical properties of B-spline","title":"Base.length","text":"Length of knot vector\n\nExamples\n\njulia> k = Knots(1,2,3,5);\n\njulia> length(k)\n4\n\n\n\n\n\n","category":"method"},{"location":"math/","page":"Mathematical properties of B-spline","title":"Mathematical properties of B-spline","text":"We introduce additional operator +.","category":"page"},{"location":"math/","page":"Mathematical properties of B-spline","title":"Mathematical properties of B-spline","text":"+(kâ‚::Knots, kâ‚‚::Knots)","category":"page"},{"location":"math/#Base.:+-Tuple{Knots,Knots}","page":"Mathematical properties of B-spline","title":"Base.:+","text":"Sum of knot vectors\n\nbeginaligned\nk^(1)+k^(2)\n=(k^(1)_1 dots k^(1)_l^(1)) + (k^(2)_1 dots k^(2)_l^(2)) \n=(textsort of union of   k^(1)  textand   k^(2) text)\nendaligned\n\nFor example, (1235)+(458)=(1234558).\n\nExamples\n\njulia> k1 = Knots(1,2,3,5);\n\njulia> k2 = Knots(4,5,8);\n\njulia> k1 + k2\nKnots([1.0, 2.0, 3.0, 4.0, 5.0, 5.0, 8.0])\n\n\n\n\n\n","category":"method"},{"location":"math/","page":"Mathematical properties of B-spline","title":"Mathematical properties of B-spline","text":"And product operator cdot.","category":"page"},{"location":"math/","page":"Mathematical properties of B-spline","title":"Mathematical properties of B-spline","text":"*(n::Integer, k::Knots)","category":"page"},{"location":"math/#Base.:*-Tuple{Integer,Knots}","page":"Mathematical properties of B-spline","title":"Base.:*","text":"Product of integer and knot vector\n\nbeginaligned\nmcdot k=underbracek+cdots+k_m\nendaligned\n\nFor example, 2cdot (1225)=(11222255).\n\nExamples\n\njulia> k = Knots(1,2,2,5);\n\njulia> 2 * k\nKnots([1.0, 1.0, 2.0, 2.0, 2.0, 2.0, 5.0, 5.0])\n\n\n\n\n\n","category":"method"},{"location":"math/","page":"Mathematical properties of B-spline","title":"Mathematical properties of B-spline","text":"unique(k::Knots)","category":"page"},{"location":"math/#Base.unique-Tuple{Knots}","page":"Mathematical properties of B-spline","title":"Base.unique","text":"Unique elements of knot vector.\n\nbeginaligned\nwidehatk\n=(textremove duplicates of   k) \nendaligned\n\nFor example, widehat(1223)=(123).\n\nExamples\n\njulia> k = Knots([1,2,2,3]);\n\njulia> unique(k)\nKnots([1.0, 2.0, 3.0])\n\n\n\n\n\n","category":"method"},{"location":"math/","page":"Mathematical properties of B-spline","title":"Mathematical properties of B-spline","text":"ð”«(k::Knots, t::Real)","category":"page"},{"location":"math/#BasicBSpline.ð”«-Tuple{Knots,Real}","page":"Mathematical properties of B-spline","title":"BasicBSpline.ð”«","text":"For Given knot vector k, the following function mathfrakn_kmathbbRtomathbbZ represents the number of knots that duplicate the knot vector k.\n\nmathfrakn_k(t) = sharpi mid k_i=t \n\nFor example, if k=(1223), then mathfrakn_k(03)=0, mathfrakn_k(1)=1, mathfrakn_k(2)=2.\n\njulia> k = Knots([1,2,2,3]);\n\njulia> ð”«(k,0.3)\n0\n\njulia> ð”«(k,1.0)\n1\n\njulia> ð”«(k,2.0)\n2\n\n\n\n\n\n","category":"method"},{"location":"math/#B-spline-space","page":"Mathematical properties of B-spline","title":"B-spline space","text":"","category":"section"},{"location":"math/","page":"Mathematical properties of B-spline","title":"Mathematical properties of B-spline","text":"Before defining B-spline space, we'll define polynomial space with degree p.","category":"page"},{"location":"math/","page":"Mathematical properties of B-spline","title":"Mathematical properties of B-spline","text":"tip: Def.  Polynomial space\nPolynomial space with degree p.mathcalPp\n=leftfmathbbRtomathbbR  tmapsto a_0+a_1t^1+cdots+a_pt^p   left  \n    a_iin mathbbR\n    right\nrightThis space mathcalPp is a p+1-dimensional linear space.","category":"page"},{"location":"math/","page":"Mathematical properties of B-spline","title":"Mathematical properties of B-spline","text":"Note that tmapsto t^i_0 le i le p is a basis of mathcalPp, and also the set of Bernstein polynomial B_(ip)_i is a basis of mathcalPp.","category":"page"},{"location":"math/","page":"Mathematical properties of B-spline","title":"Mathematical properties of B-spline","text":"beginaligned\nB_(ip)(t)\n=binompi-1t^i-1(1-t)^p-i+1\n(i=1 dots p+1)\nendaligned","category":"page"},{"location":"math/","page":"Mathematical properties of B-spline","title":"Mathematical properties of B-spline","text":"Where binompi-1 is a binomial coefficient.","category":"page"},{"location":"math/","page":"Mathematical properties of B-spline","title":"Mathematical properties of B-spline","text":"tip: Def.  B-spline space\nFor given polynomial degree pge 0 and knot vector k=(k_1dotsk_l), B-spline space mathcalPpk is defined as follows:mathcalPpk\n=leftfmathbbRtomathbbR   left  \n    begingathered\n        operatornamesupp(f)subseteq k_1 k_l \n        exists tildefinmathcalPp f_k_i k_i+1) = tildef_k_i k_i+1)  \n        forall t in mathbbR exists delta  0 f_(t-deltat+delta)in C^p-mathfrakn_k(t)\n    endgathered right\nright","category":"page"},{"location":"math/","page":"Mathematical properties of B-spline","title":"Mathematical properties of B-spline","text":"Note that a element of the space mathcalPpk is piecewise polynomial.","category":"page"},{"location":"math/","page":"Mathematical properties of B-spline","title":"Mathematical properties of B-spline","text":"[fig]","category":"page"},{"location":"math/","page":"Mathematical properties of B-spline","title":"Mathematical properties of B-spline","text":"using BasicBSpline\np = 2\nk = Knots([1,3,5,6,8,9])\nBSplineSpace(p,k)","category":"page"},{"location":"math/","page":"Mathematical properties of B-spline","title":"Mathematical properties of B-spline","text":"A B-spline space is said to be proper if its degree and knots satisfies following property:","category":"page"},{"location":"math/","page":"Mathematical properties of B-spline","title":"Mathematical properties of B-spline","text":"beginaligned\nk_ik_i+p+1  (1 le i le l-p-1)\nendaligned","category":"page"},{"location":"math/","page":"Mathematical properties of B-spline","title":"Mathematical properties of B-spline","text":"using BasicBSpline\nisproper(BSplineSpace(2,Knots([1,3,5,6,8,9]))) # true\nisproper(BSplineSpace(1,Knots([1,3,3,3,8,9]))) # false","category":"page"},{"location":"math/","page":"Mathematical properties of B-spline","title":"Mathematical properties of B-spline","text":"The B-spline space is linear space, and if a B-spline space is proper, its dimension is calculated by:","category":"page"},{"location":"math/","page":"Mathematical properties of B-spline","title":"Mathematical properties of B-spline","text":"dim(mathcalPpk)=sharp k -p -1","category":"page"},{"location":"math/","page":"Mathematical properties of B-spline","title":"Mathematical properties of B-spline","text":"using BasicBSpline\ndim(BSplineSpace(2,Knots([1,3,5,6,8,9]))) # 3","category":"page"},{"location":"math/#B-spline-basis-function","page":"Mathematical properties of B-spline","title":"B-spline basis function","text":"","category":"section"},{"location":"math/","page":"Mathematical properties of B-spline","title":"Mathematical properties of B-spline","text":"tip: Def.  B-spline space\nB-spline basis function is defined by Coxâ€“de Boor recursion formula.beginaligned\nB_(ipk)(t)\n=\nfract-k_ik_i+p-k_iB_(ip-1k)(t)\n+frack_i+p+1-tk_i+p+1-k_i+1B_(i+1p-1k)(t) \nB_(i0k)(t)\n=\nbegincases\n    1quad (k_ile t k_i+1)\n    0quad (textotherwise)\nendcases\nendalignedIf the denominator is ..","category":"page"},{"location":"math/","page":"Mathematical properties of B-spline","title":"Mathematical properties of B-spline","text":"info: Thm.  Basis of B-spline space\nThe set of functions B_(ipk)_i is a basis of B-spline space mathcalPpk.","category":"page"},{"location":"math/","page":"Mathematical properties of B-spline","title":"Mathematical properties of B-spline","text":"using BasicBSpline\nusing Plots\ngr()\np = 2\nk = Knots(1:8)\nP = BSplineSpace(p,k)\nplot([t->bsplinebasisâ‚Šâ‚€(i,P,t) for i in 1:dim(P)], 1, 8, ylims=(0,1.05))","category":"page"},{"location":"math/","page":"Mathematical properties of B-spline","title":"Mathematical properties of B-spline","text":"(Image: )","category":"page"},{"location":"math/","page":"Mathematical properties of B-spline","title":"Mathematical properties of B-spline","text":"You can choose the first terms in different ways.","category":"page"},{"location":"math/","page":"Mathematical properties of B-spline","title":"Mathematical properties of B-spline","text":"beginaligned\nB_(i0k)(t)\n=\nbegincases\n    1quad (k_i  t le k_i+1) \n    0quad (textotherwise)\nendcases\nendaligned","category":"page"},{"location":"math/","page":"Mathematical properties of B-spline","title":"Mathematical properties of B-spline","text":"using BasicBSpline\nusing Plots\ngr()\np = 2\nk = Knots(1:8)\nP = BSplineSpace(p,k)\nplot([t->bsplinebasisâ‚‹â‚€(i,P,t) for i in 1:dim(P)], 1, 8, ylims=(0,1.05))","category":"page"},{"location":"math/","page":"Mathematical properties of B-spline","title":"Mathematical properties of B-spline","text":"(Image: )","category":"page"},{"location":"math/#Support-of-B-spline-basis-function","page":"Mathematical properties of B-spline","title":"Support of B-spline basis function","text":"","category":"section"},{"location":"math/","page":"Mathematical properties of B-spline","title":"Mathematical properties of B-spline","text":"info: Thm.  Support of B-spline basis function\nIf a B-spline spacemathcalPpk is proper, the support of its basis function is calculated as follows:operatornamesupp(B_(ipk))=k_ik_i+p+1","category":"page"},{"location":"math/","page":"Mathematical properties of B-spline","title":"Mathematical properties of B-spline","text":"[fig]","category":"page"},{"location":"math/","page":"Mathematical properties of B-spline","title":"Mathematical properties of B-spline","text":"using BasicBSpline\ni = 2\nk = Knots([5,12,13,13,14])\np = 2\nP = BSplineSpace(p,k)\nbsplinesupport(P) # [5..13, 12..14]\nbsplinesupport(i,P) # 12..14","category":"page"},{"location":"math/#Derivative-of-B-spline-basis-function","page":"Mathematical properties of B-spline","title":"Derivative of B-spline basis function","text":"","category":"section"},{"location":"math/","page":"Mathematical properties of B-spline","title":"Mathematical properties of B-spline","text":"info: Thm.  Derivative of B-spline basis function\nThe derivative of B-spline basis function can be expressed as follows:beginaligned\ndotB_(ipk)(t)\n=fracddtB_(ipk)(t) \n=pleft(frac1k_i+p-k_iB_(ip-1k)(t)-frac1k_i+p+1-k_i+1B_(i+1p-1k)(t)right)\nendalignedNote that dotB_(ipk)inmathcalPp-1k.","category":"page"},{"location":"math/","page":"Mathematical properties of B-spline","title":"Mathematical properties of B-spline","text":"using BasicBSpline\nusing Plots\ngr()\np = 2\nk = Knots(1:8)\nP = BSplineSpace(p,k)\nplot([t->bsplinebasisâ€²â‚Šâ‚€(i,P,t) for i in 1:dim(P)], 1, 8, ylims=(0,1.05))","category":"page"},{"location":"math/","page":"Mathematical properties of B-spline","title":"Mathematical properties of B-spline","text":"(Image: )","category":"page"},{"location":"math/#Partition-of-unity","page":"Mathematical properties of B-spline","title":"Partition of unity","text":"","category":"section"},{"location":"math/","page":"Mathematical properties of B-spline","title":"Mathematical properties of B-spline","text":"info: Thm.  Partition of unity\nbeginaligned\nsum_iB_(ipk)(t) = 1  (k_p+1 le t  k_l-p) \n0 le B_(ipk)(t) le 1\nendaligned","category":"page"},{"location":"math/","page":"Mathematical properties of B-spline","title":"Mathematical properties of B-spline","text":"using BasicBSpline\nusing Plots\ngr()\np = 2\nk = Knots(1:8)\nP = BSplineSpace(p,k)\nplot(t->sum(bsplinebasisâ‚Šâ‚€(i,P,t) for i in 1:dim(P)), 1, 8, ylims=(0,1.05))","category":"page"},{"location":"math/","page":"Mathematical properties of B-spline","title":"Mathematical properties of B-spline","text":"(Image: )","category":"page"},{"location":"math/","page":"Mathematical properties of B-spline","title":"Mathematical properties of B-spline","text":"To satisfy the partition of unity on whole interval 18, sometimes more knots will be inserted to the endpoints of the interval.","category":"page"},{"location":"math/","page":"Mathematical properties of B-spline","title":"Mathematical properties of B-spline","text":"using BasicBSpline\nusing Plots\ngr()\np = 2\nk = Knots(1:8) + p * Knots([1,8])\nP = BSplineSpace(p,k)\nplot(t->sum(bsplinebasisâ‚Šâ‚€(i,P,t) for i in 1:dim(P)), 1, 8, ylims=(0,1.05))","category":"page"},{"location":"math/","page":"Mathematical properties of B-spline","title":"Mathematical properties of B-spline","text":"(Image: )","category":"page"},{"location":"math/","page":"Mathematical properties of B-spline","title":"Mathematical properties of B-spline","text":"But, the sum sum_i B_(ipk)(t) is not equal to 1 if t=8. Therefore, to satisfy partition of unity on closed interval k_p+1 k_l-p, the definition of first terms of B-spline basis functions are sometimes replaced:","category":"page"},{"location":"math/","page":"Mathematical properties of B-spline","title":"Mathematical properties of B-spline","text":"beginaligned\nB_(i0k)(t)\n=\nbegincases\n    1quad (k_i le tk_i+1)\n    1quad (k_i  t = k_i+1=k_l)\n    0quad (textotherwise)\nendcases\nendaligned","category":"page"},{"location":"math/","page":"Mathematical properties of B-spline","title":"Mathematical properties of B-spline","text":"using BasicBSpline\nusing Plots\ngr()\np = 2\nk = Knots(1:8) + p * Knots([1,8])\nP = BSplineSpace(p,k)\nplot(t->sum(bsplinebasis(i,P,t) for i in 1:dim(P)), 1, 8, ylims=(0,1.05))","category":"page"},{"location":"math/","page":"Mathematical properties of B-spline","title":"Mathematical properties of B-spline","text":"(Image: )","category":"page"},{"location":"math/#Inclusion-relation-between-B-spline-spaces","page":"Mathematical properties of B-spline","title":"Inclusion relation between B-spline spaces","text":"","category":"section"},{"location":"math/","page":"Mathematical properties of B-spline","title":"Mathematical properties of B-spline","text":"info: Thm.  Support of B-spline basis function\nFor proper B-spline spaces, the following relationship holds.mathcalPpk\nsubseteq mathcalPpk\nLeftrightarrow (m=p-p ge 0  textand  k+mwidehatksubseteq k)","category":"page"},{"location":"math/","page":"Mathematical properties of B-spline","title":"Mathematical properties of B-spline","text":"(as linear subspace..)","category":"page"},{"location":"math/","page":"Mathematical properties of B-spline","title":"Mathematical properties of B-spline","text":"using BasicBSpline\nP1 = BSplineSpace(1,Knots([1,3,5,8]))\nP2 = BSplineSpace(1,Knots([1,3,5,6,8,9]))\nP3 = BSplineSpace(2,Knots([1,1,3,3,5,5,8,8]))\nP1 âŠ† P2 # true\nP1 âŠ† P3 # true\nP2 âŠ† P3 # false\nP2 âŠˆ P3 # true","category":"page"},{"location":"math/","page":"Mathematical properties of B-spline","title":"Mathematical properties of B-spline","text":"Here are plots of the B-spline basis functions of the spaces P1, P2, P3.","category":"page"},{"location":"math/","page":"Mathematical properties of B-spline","title":"Mathematical properties of B-spline","text":"using BasicBSpline\nusing Plots\ngr()\nP1 = BSplineSpace(1,Knots([1,3,5,8]))\nP2 = BSplineSpace(1,Knots([1,3,5,6,8,9]))\nP3 = BSplineSpace(2,Knots([1,1,3,3,5,5,8,8]))\nplot(\n    plot([t->bsplinebasisâ‚Šâ‚€(i,P1,t) for i in 1:dim(P1)], 1, 9, ylims=(0,1.05), legend=false),\n    plot([t->bsplinebasisâ‚Šâ‚€(i,P2,t) for i in 1:dim(P2)], 1, 9, ylims=(0,1.05), legend=false),\n    plot([t->bsplinebasisâ‚Šâ‚€(i,P3,t) for i in 1:dim(P3)], 1, 9, ylims=(0,1.05), legend=false),\n    layout=(3,1),\n    link=:x\n)","category":"page"},{"location":"math/","page":"Mathematical properties of B-spline","title":"Mathematical properties of B-spline","text":"(Image: )","category":"page"},{"location":"math/","page":"Mathematical properties of B-spline","title":"Mathematical properties of B-spline","text":"This means, there exists a n times n matrix A which holds:","category":"page"},{"location":"math/","page":"Mathematical properties of B-spline","title":"Mathematical properties of B-spline","text":"beginaligned\nB_(ipk)\n=sum_jA_ij B_(jpk) \nn=dim(mathcalPpk) \nn=dim(mathcalPpk)\nendaligned","category":"page"},{"location":"math/","page":"Mathematical properties of B-spline","title":"Mathematical properties of B-spline","text":"You can calculate the change of basis matrix A with changebasis.","category":"page"},{"location":"math/","page":"Mathematical properties of B-spline","title":"Mathematical properties of B-spline","text":"using BasicBSpline\nA12 = changebasis(P1,P2)\nA13 = changebasis(P1,P3)","category":"page"},{"location":"math/","page":"Mathematical properties of B-spline","title":"Mathematical properties of B-spline","text":"using BasicBSpline\nusing Plots\ngr()\nplot(\n    plot([t->bsplinebasisâ‚Šâ‚€(i,P1,t) for i in 1:dim(P1)], 1, 9, ylims=(0,1.05), legend=false),\n    plot([t->sum(A12[i,j]*bsplinebasisâ‚Šâ‚€(j,P2,t) for j in 1:dim(P2)) for i in 1:dim(P1)], 1, 9, ylims=(0,1.05), legend=false),\n    plot([t->sum(A13[i,j]*bsplinebasisâ‚Šâ‚€(j,P3,t) for j in 1:dim(P3)) for i in 1:dim(P1)], 1, 9, ylims=(0,1.05), legend=false),\n    layout=(3,1),\n    link=:x\n)","category":"page"},{"location":"math/","page":"Mathematical properties of B-spline","title":"Mathematical properties of B-spline","text":"(Image: )","category":"page"},{"location":"math/#Multi-dimensional-B-spline","page":"Mathematical properties of B-spline","title":"Multi-dimensional B-spline","text":"","category":"section"},{"location":"math/","page":"Mathematical properties of B-spline","title":"Mathematical properties of B-spline","text":"tensor product","category":"page"},{"location":"math/","page":"Mathematical properties of B-spline","title":"Mathematical properties of B-spline","text":"B_i^1dotsi^d(t^1dotst^d)\n=B_(i^1p^1k^1)(t^1)cdots B_(i^dp^dk^d)(t^d)","category":"page"},{"location":"math/#B-spline-manifold","page":"Mathematical properties of B-spline","title":"B-spline manifold","text":"","category":"section"},{"location":"math/","page":"Mathematical properties of B-spline","title":"Mathematical properties of B-spline","text":"B-spline manifold is a parametric representation of a shape.","category":"page"},{"location":"math/","page":"Mathematical properties of B-spline","title":"Mathematical properties of B-spline","text":"tip: Def.  B-spline manifold\nFor given d-dimensional B-spline basis functions B_i^1dotsi^d and given points bma_i^1dotsi^d in mathbbR^hatd, B-spline manifold is defined by following equality:bmp(t^1dotst^dbma_i^1dotsi^d)\n=sum_i^1dotsi^dB_i^1dotsi^d(t^1dotst^d) bma_i^1dotsi^dWhere bma_i^1dotsi^d are called control points.","category":"page"},{"location":"math/","page":"Mathematical properties of B-spline","title":"Mathematical properties of B-spline","text":"We will also write bmp(t^1dotst^d bma), bmp(t^1dotst^d), bmp(t bma) or bmp(t) for simplicity.","category":"page"},{"location":"math/","page":"Mathematical properties of B-spline","title":"Mathematical properties of B-spline","text":"using BasicBSpline\nP1 = BSplineSpace(1,Knots([0,0,1,1]))\nP2 = BSplineSpace(1,Knots([1,1,2,3,3]))\nn1 = dim(P1) # 2\nn2 = dim(P2) # 3\na = [[i, j] for i in 1:n1, j in 1:n2]  # n1 Ã— n2 array of dÌ‚ array.\nM = BSplineManifold([P1, P2], a)","category":"page"},{"location":"math/#B-spline-curve","page":"Mathematical properties of B-spline","title":"B-spline curve","text":"","category":"section"},{"location":"math/","page":"Mathematical properties of B-spline","title":"Mathematical properties of B-spline","text":"using BasicBSpline\n## 1-dim B-spline manifold\np = 2 # degree of polynomial\nk = Knots(1:12) # knot vector\nP = FastBSplineSpace(p, k) # B-spline space\na = [[i-5, 3*sin(i^2)] for i in 1:dim(P)] # control points\nM = BSplineCurve([P], a) # Define B-spline manifold\nsave_png(\"1dim.png\", M, unitlength = 50)","category":"page"},{"location":"math/","page":"Mathematical properties of B-spline","title":"Mathematical properties of B-spline","text":"(Image: )","category":"page"},{"location":"math/#B-spline-surface","page":"Mathematical properties of B-spline","title":"B-spline surface","text":"","category":"section"},{"location":"math/","page":"Mathematical properties of B-spline","title":"Mathematical properties of B-spline","text":"using BasicBSpline\np = 2 # degree of polynomial\nk = Knots(1:8) # knot vector\nP = BSplineSpace(p,k) # B-spline space\nrand_a = [rand(2) for i in 1:dim(P), j in 1:dim(P)]\na = [[2*i-6.5,2*j-6.5] for i in 1:dim(P), j in 1:dim(P)] + rand_a # random generated control points\nM = BSplineManifold([P,P],a) # Define B-spline manifold\nsave_png(\"2dim.png\", M) # save image","category":"page"},{"location":"math/","page":"Mathematical properties of B-spline","title":"Mathematical properties of B-spline","text":"(Image: )","category":"page"},{"location":"math/","page":"Mathematical properties of B-spline","title":"Mathematical properties of B-spline","text":"using BasicBSpline\npoints = [M([u,v]) for u in range(3.0,6.0,length=50), v in range(3.0,6.0,length=50)]\nX = [point[1] for point in points]\nY = [point[2] for point in points]\nscene = Scene(resolution=(1000,1000))\nMakie.surface!(X,Y)\nMakie.xlims!(-5,5)\nMakie.ylims!(-5,5)\nsave(\"2dim_makie.png\", scene)","category":"page"},{"location":"math/","page":"Mathematical properties of B-spline","title":"Mathematical properties of B-spline","text":"(Image: )","category":"page"},{"location":"math/#Affine-commutativity","page":"Mathematical properties of B-spline","title":"Affine commutativity","text":"","category":"section"},{"location":"math/","page":"Mathematical properties of B-spline","title":"Mathematical properties of B-spline","text":"info: Thm.  Affine commutativity\nIf T is a affine transform mathbbR^dtomathbbR^d, then the following equality holds.T(bmp(t bma))\n=bmp(t T(bma))","category":"page"},{"location":"math/#Refinement","page":"Mathematical properties of B-spline","title":"Refinement","text":"","category":"section"},{"location":"math/#h-refinemnet","page":"Mathematical properties of B-spline","title":"h-refinemnet","text":"","category":"section"},{"location":"math/","page":"Mathematical properties of B-spline","title":"Mathematical properties of B-spline","text":"Insert additional knots to knot vector.","category":"page"},{"location":"math/","page":"Mathematical properties of B-spline","title":"Mathematical properties of B-spline","text":"using BasicBSpline\nkâ‚Š=[Knots(3.3,4.2),Knots(3.8,3.2,5.3)] # additional knots\nMâ€² = refinement(M,kâ‚Š=kâ‚Š) # refinement of B-spline manifold\nsave_png(\"2dim_h-refinement.png\", Mâ€²) # save image","category":"page"},{"location":"math/","page":"Mathematical properties of B-spline","title":"Mathematical properties of B-spline","text":"(Image: )","category":"page"},{"location":"math/","page":"Mathematical properties of B-spline","title":"Mathematical properties of B-spline","text":"Note that this shape and the last shape are identical.","category":"page"},{"location":"math/#p-refinemnet","page":"Mathematical properties of B-spline","title":"p-refinemnet","text":"","category":"section"},{"location":"math/","page":"Mathematical properties of B-spline","title":"Mathematical properties of B-spline","text":"Increase the polynomial degree of B-spline manifold.","category":"page"},{"location":"math/","page":"Mathematical properties of B-spline","title":"Mathematical properties of B-spline","text":"using BasicBSpline\npâ‚Š=[1,2] # additional degrees\nMâ€² = refinement(M,pâ‚Š=pâ‚Š) # refinement of B-spline manifold\nsave_png(\"2dim_p-refinement.png\", Mâ€²) # save image","category":"page"},{"location":"math/","page":"Mathematical properties of B-spline","title":"Mathematical properties of B-spline","text":"(Image: )","category":"page"},{"location":"math/","page":"Mathematical properties of B-spline","title":"Mathematical properties of B-spline","text":"Note that this shape and the last shape are identical.","category":"page"},{"location":"math/#Fitting","page":"Mathematical properties of B-spline","title":"Fitting","text":"","category":"section"},{"location":"math/","page":"Mathematical properties of B-spline","title":"Mathematical properties of B-spline","text":"Least squares method.","category":"page"},{"location":"math/","page":"Mathematical properties of B-spline","title":"Mathematical properties of B-spline","text":"Try on Desmos graphing graphing calculator!","category":"page"},{"location":"math/","page":"Mathematical properties of B-spline","title":"Mathematical properties of B-spline","text":"using BasicBSpline\np1 = 2\np2 = 2\nk1 = Knots(-10:10)+p1*Knots(-10,10)\nk2 = Knots(-10:10)+p2*Knots(-10,10)\nP1 = FastBSplineSpace(p1, k1)\nP2 = FastBSplineSpace(p2, k2)\n\nf(u1, u2) = [2u1+sin(u1)+cos(u2)+u2/2, 3u2+sin(u2)+sin(u1)/2+u1^2/6]/5\n\na = fittingcontrolpoints(f, P1, P2)\nM = BSplineManifold([P1,P2],a)\nsave_png(\"fitting.png\", M, unitlength=50, up=10, down=-10, left=-10, right=10)","category":"page"},{"location":"math/","page":"Mathematical properties of B-spline","title":"Mathematical properties of B-spline","text":"(Image: ) (Image: )","category":"page"}]
}
